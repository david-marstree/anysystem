import{j as v}from"./jsx-runtime-BjG_zV1W.js";import{r as s,R as c}from"./iframe-gIK4bdEr.js";import{t as P}from"./bundle-mjs-3VKOpVsw.js";import{o as Re,n as Ie,a as b,u as Pe,W as D,y as H,b as U,p as je,H as B,t as ce,M as ne}from"./keyboard-ea4pcW4v.js";import{E as de,m as W,r as V}from"./active-element-history-VI-XlWim.js";import{x as X,n as K,s as Se,c as Be,e as Le,y as Ne,F as Oe,f as He,l as re,t as _e,J as qe}from"./portal-DJ8oPe_c.js";import{l as fe,f as me,m as Ae,X as pe,I as O}from"./transition-BSBR0-FO.js";import{T as Y,s as z,w as Ve,U as Ue}from"./description-Bx7Nq89P.js";import{u as Ye}from"./close-provider-gPLfz-DZ.js";import{u as ve,i as L,s as ze}from"./open-closed-D6AVR6gh.js";import{P as S,F as x,I as E,T as oe}from"./focus-management-Ddlno2iB.js";import{B as Ge}from"./Button-Du6In3gv.js";import"./preload-helper-C1FmrZbK.js";import"./index-BPuoX7PR.js";function We(e,t=typeof document<"u"?document.defaultView:null,n){let o=X(e,"escape");de(t,"keydown",r=>{o&&(r.defaultPrevented||r.key===Re.Escape&&n(r))})}function Xe(){var e;let[t]=s.useState(()=>typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(pointer: coarse)"):null),[n,o]=s.useState((e=t==null?void 0:t.matches)!=null?e:!1);return Ie(()=>{if(!t)return;function r(i){o(i.matches)}return t.addEventListener("change",r),()=>t.removeEventListener("change",r)},[t]),n}function Ke({defaultContainers:e=[],portals:t,mainTreeNode:n}={}){let o=K(n),r=b(()=>{var i,u;let a=[];for(let l of e)l!==null&&(l instanceof HTMLElement?a.push(l):"current"in l&&l.current instanceof HTMLElement&&a.push(l.current));if(t!=null&&t.current)for(let l of t.current)a.push(l);for(let l of(i=o==null?void 0:o.querySelectorAll("html > *, body > *"))!=null?i:[])l!==document.body&&l!==document.head&&l instanceof HTMLElement&&l.id!=="headlessui-portal-root"&&(n&&(l.contains(n)||l.contains((u=n==null?void 0:n.getRootNode())==null?void 0:u.host))||a.some(d=>l.contains(d))||a.push(l));return a});return{resolveContainers:r,contains:b(i=>r().some(u=>u.contains(i)))}}let ge=s.createContext(null);function le({children:e,node:t}){let[n,o]=s.useState(null),r=he(t??n);return c.createElement(ge.Provider,{value:r},e,r===null&&c.createElement(Y,{features:z.Hidden,ref:i=>{var u,a;if(i){for(let l of(a=(u=Pe(i))==null?void 0:u.querySelectorAll("html > *, body > *"))!=null?a:[])if(l!==document.body&&l!==document.head&&l instanceof HTMLElement&&l!=null&&l.contains(i)){o(l);break}}}}))}function he(e=null){var t;return(t=s.useContext(ge))!=null?t:e}var j=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(j||{});function Ze(){let e=s.useRef(0);return Se(!0,"keydown",t=>{t.key==="Tab"&&(e.current=t.shiftKey?1:0)},!0),e}function we(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let n of e.current)n.current instanceof HTMLElement&&t.add(n.current);return t}let Je="div";var $=(e=>(e[e.None=0]="None",e[e.InitialFocus=1]="InitialFocus",e[e.TabLock=2]="TabLock",e[e.FocusLock=4]="FocusLock",e[e.RestoreFocus=8]="RestoreFocus",e[e.AutoFocus=16]="AutoFocus",e))($||{});function Qe(e,t){let n=s.useRef(null),o=H(n,t),{initialFocus:r,initialFocusFallback:i,containers:u,features:a=15,...l}=e;fe()||(a=0);let d=K(n);rt(a,{ownerDocument:d});let f=ot(a,{ownerDocument:d,container:n,initialFocus:r,initialFocusFallback:i});lt(a,{ownerDocument:d,container:n,containers:u,previousActiveElement:f});let F=Ze(),y=b(m=>{let w=n.current;w&&(T=>T())(()=>{U(F.current,{[j.Forwards]:()=>{S(w,x.First,{skipElements:[m.relatedTarget,i]})},[j.Backwards]:()=>{S(w,x.Last,{skipElements:[m.relatedTarget,i]})}})})}),g=X(!!(a&2),"focus-trap#tab-lock"),h=je(),k=s.useRef(!1),R={ref:o,onKeyDown(m){m.key=="Tab"&&(k.current=!0,h.requestAnimationFrame(()=>{k.current=!1}))},onBlur(m){if(!(a&4))return;let w=we(u);n.current instanceof HTMLElement&&w.add(n.current);let T=m.relatedTarget;T instanceof HTMLElement&&T.dataset.headlessuiFocusGuard!=="true"&&(ye(w,T)||(k.current?S(n.current,U(F.current,{[j.Forwards]:()=>x.Next,[j.Backwards]:()=>x.Previous})|x.WrapAround,{relativeTo:m.target}):m.target instanceof HTMLElement&&E(m.target)))}};return c.createElement(c.Fragment,null,g&&c.createElement(Y,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:y,features:z.Focusable}),B({ourProps:R,theirProps:l,defaultTag:Je,name:"FocusTrap"}),g&&c.createElement(Y,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:y,features:z.Focusable}))}let et=D(Qe),tt=Object.assign(et,{features:$});function nt(e=!0){let t=s.useRef(V.slice());return W(([n],[o])=>{o===!0&&n===!1&&ce(()=>{t.current.splice(0)}),o===!1&&n===!0&&(t.current=V.slice())},[e,V,t]),b(()=>{var n;return(n=t.current.find(o=>o!=null&&o.isConnected))!=null?n:null})}function rt(e,{ownerDocument:t}){let n=!!(e&8),o=nt(n);W(()=>{n||(t==null?void 0:t.activeElement)===(t==null?void 0:t.body)&&E(o())},[n]),Be(()=>{n&&E(o())})}function ot(e,{ownerDocument:t,container:n,initialFocus:o,initialFocusFallback:r}){let i=s.useRef(null),u=X(!!(e&1),"focus-trap#initial-focus"),a=me();return W(()=>{if(e===0)return;if(!u){r!=null&&r.current&&E(r.current);return}let l=n.current;l&&ce(()=>{if(!a.current)return;let d=t==null?void 0:t.activeElement;if(o!=null&&o.current){if((o==null?void 0:o.current)===d){i.current=d;return}}else if(l.contains(d)){i.current=d;return}if(o!=null&&o.current)E(o.current);else{if(e&16){if(S(l,x.First|x.AutoFocus)!==oe.Error)return}else if(S(l,x.First)!==oe.Error)return;if(r!=null&&r.current&&(E(r.current),(t==null?void 0:t.activeElement)===r.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}i.current=t==null?void 0:t.activeElement})},[r,u,e]),i}function lt(e,{ownerDocument:t,container:n,containers:o,previousActiveElement:r}){let i=me(),u=!!(e&4);de(t==null?void 0:t.defaultView,"focus",a=>{if(!u||!i.current)return;let l=we(o);n.current instanceof HTMLElement&&l.add(n.current);let d=r.current;if(!d)return;let f=a.target;f&&f instanceof HTMLElement?ye(l,f)?(r.current=f,E(f)):(a.preventDefault(),a.stopPropagation(),E(d)):E(r.current)},!0)}function ye(e,t){for(let n of e)if(n.contains(t))return!0;return!1}var at=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(at||{}),it=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(it||{});let ut={0(e,t){return e.titleId===t.id?e:{...e,titleId:t.id}}},Z=s.createContext(null);Z.displayName="DialogContext";function _(e){let t=s.useContext(Z);if(t===null){let n=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,_),n}return t}function st(e,t){return U(t.type,ut,e,t)}let ae=D(function(e,t){let n=s.useId(),{id:o=`headlessui-dialog-${n}`,open:r,onClose:i,initialFocus:u,role:a="dialog",autoFocus:l=!0,__demoMode:d=!1,unmount:f=!1,...F}=e,y=s.useRef(!1);a=function(){return a==="dialog"||a==="alertdialog"?a:(y.current||(y.current=!0,console.warn(`Invalid role [${a}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")}();let g=ve();r===void 0&&g!==null&&(r=(g&L.Open)===L.Open);let h=s.useRef(null),k=H(h,t),R=K(h),m=r?0:1,[w,T]=s.useReducer(st,{titleId:null,descriptionId:null,panelRef:s.createRef()}),C=b(()=>i(!1)),J=b(p=>T({type:0,id:p})),M=fe()?m===0:!1,[Fe,xe]=Le(),ke={get current(){var p;return(p=w.panelRef.current)!=null?p:h.current}},q=he(),{resolveContainers:A}=Ke({mainTreeNode:q,portals:Fe,defaultContainers:[ke]}),Q=g!==null?(g&L.Closing)===L.Closing:!1;Ne(d||Q?!1:M,{allowed:b(()=>{var p,te;return[(te=(p=h.current)==null?void 0:p.closest("[data-headlessui-portal]"))!=null?te:null]}),disallowed:b(()=>{var p;return[(p=q==null?void 0:q.closest("body > *:not(#headlessui-portal-root)"))!=null?p:null]})}),Oe(M,A,p=>{p.preventDefault(),C()}),We(M,R==null?void 0:R.defaultView,p=>{p.preventDefault(),p.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur(),C()}),He(d||Q?!1:M,R,A),Ae(M,h,C);let[Te,$e]=Ue(),Ce=s.useMemo(()=>[{dialogState:m,close:C,setTitleId:J,unmount:f},w],[m,w,C,J,f]),ee=s.useMemo(()=>({open:m===0}),[m]),Me={ref:k,id:o,role:a,tabIndex:-1,"aria-modal":d?void 0:m===0?!0:void 0,"aria-labelledby":w.titleId,"aria-describedby":Te,unmount:f},De=!Xe(),I=$.None;return M&&!d&&(I|=$.RestoreFocus,I|=$.TabLock,l&&(I|=$.AutoFocus),De&&(I|=$.InitialFocus)),c.createElement(ze,null,c.createElement(re,{force:!0},c.createElement(_e,null,c.createElement(Z.Provider,{value:Ce},c.createElement(qe,{target:h},c.createElement(re,{force:!1},c.createElement($e,{slot:ee},c.createElement(xe,null,c.createElement(tt,{initialFocus:u,initialFocusFallback:h,containers:A,features:I},c.createElement(Ye,{value:C},B({ourProps:Me,theirProps:F,slot:ee,defaultTag:ct,features:dt,visible:m===0,name:"Dialog"})))))))))))}),ct="div",dt=ne.RenderStrategy|ne.Static;function ft(e,t){let{transition:n=!1,open:o,...r}=e,i=ve(),u=e.hasOwnProperty("open")||i!==null,a=e.hasOwnProperty("onClose");if(!u&&!a)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!u)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!a)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!i&&typeof e.open!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${e.open}`);if(typeof e.onClose!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${e.onClose}`);return(o!==void 0||n)&&!r.static?c.createElement(le,null,c.createElement(pe,{show:o,transition:n,unmount:r.unmount},c.createElement(ae,{ref:t,...r}))):c.createElement(le,null,c.createElement(ae,{ref:t,open:o,...r}))}let mt="div";function pt(e,t){let n=s.useId(),{id:o=`headlessui-dialog-panel-${n}`,transition:r=!1,...i}=e,[{dialogState:u,unmount:a},l]=_("Dialog.Panel"),d=H(t,l.panelRef),f=s.useMemo(()=>({open:u===0}),[u]),F=b(g=>{g.stopPropagation()}),y={ref:d,id:o,onClick:F};return c.createElement(r?O:s.Fragment,{...r?{unmount:a}:{}},B({ourProps:y,theirProps:i,slot:f,defaultTag:mt,name:"Dialog.Panel"}))}let vt="div";function gt(e,t){let{transition:n=!1,...o}=e,[{dialogState:r,unmount:i}]=_("Dialog.Backdrop"),u=s.useMemo(()=>({open:r===0}),[r]),a={ref:t,"aria-hidden":!0};return c.createElement(n?O:s.Fragment,{...n?{unmount:i}:{}},B({ourProps:a,theirProps:o,slot:u,defaultTag:vt,name:"Dialog.Backdrop"}))}let ht="h2";function wt(e,t){let n=s.useId(),{id:o=`headlessui-dialog-title-${n}`,...r}=e,[{dialogState:i,setTitleId:u}]=_("Dialog.Title"),a=H(t);s.useEffect(()=>(u(o),()=>u(null)),[o,u]);let l=s.useMemo(()=>({open:i===0}),[i]);return B({ourProps:{ref:a,id:o},theirProps:r,slot:l,defaultTag:ht,name:"Dialog.Title"})}let yt=D(ft),be=D(pt);D(gt);let Ee=D(wt),bt=Object.assign(yt,{Panel:be,Title:Ee,Description:Ve});const G=({open:e=!1,title:t,buttons:n,children:o,className:r,size:i="md",onClickBackdropClose:u=!0},a)=>{const[l,d]=c.useState(e),f=()=>d(!1);return c.useImperativeHandle(a,()=>({show:()=>d(!0),hide:f})),v.jsx(v.Fragment,{children:v.jsx(pe,{appear:!0,show:l,as:s.Fragment,children:v.jsxs(bt,{as:"div",className:"relative z-[999]",onClose:u?f:()=>{},children:[v.jsx(O,{as:s.Fragment,enter:"duration-300 ease-out",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"duration-200 ease-in",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:v.jsx("div",{className:"fixed inset-0 bg-black/25 dark:bg-gray-500/85"})}),v.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:v.jsx("div",{className:P("flex min-h-full items-center justify-center text-center",i==="full"?"p-0":"p-4"),children:v.jsx(O,{as:s.Fragment,enter:"duration-300 ease-out",enterFrom:"scale-95 opacity-0",enterTo:"scale-100 opacity-100",leave:"duration-200 ease-in",leaveFrom:"scale-100 opacity-100",leaveTo:"scale-95 opacity-0",children:v.jsxs(be,{className:P("flex w-full max-w-md transform flex-col rounded-lg bg-white p-6 text-left align-middle shadow-xl transition-all dark:bg-gray-800",i==="md"&&"max-w-md",i==="lg"&&"max-w-lg",i==="xl"&&"max-w-xl",i==="full"&&"h-screen max-w-full rounded-none"),children:[v.jsx(Ee,{as:"div",className:P("text-lg font-medium leading-6 text-gray-900 dark:text-white",r==null?void 0:r.header),children:t}),v.jsx("div",{className:"mt-2 text-sm text-gray-500 grow dark:text-gray-400",children:o}),v.jsx("div",{className:P("mt-4 flex justify-end gap-2",r==null?void 0:r.footer),children:n&&n.map(({className:F,onClick:y,label:g,...h},k)=>v.jsx(Ge,{type:"button",className:P(F),onClick:y||f,...h,children:g},k))})]})})})})]})})})},Et=c.forwardRef(G);try{G.displayName="Modal",G.__docgenInfo={description:"",displayName:"Modal",props:{open:{defaultValue:{value:"false"},description:"",name:"open",required:!1,type:{name:"boolean"}},size:{defaultValue:{value:"md"},description:"",name:"size",required:!1,type:{name:"enum",value:[{value:'"md"'},{value:'"lg"'},{value:'"xl"'},{value:'"full"'}]}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},buttons:{defaultValue:null,description:"",name:"buttons",required:!1,type:{name:"ModalButton[]"}},onClickBackdropClose:{defaultValue:{value:"true"},description:"",name:"onClickBackdropClose",required:!1,type:{name:"boolean"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"{ header?: string; footer?: string; } | undefined"}}}}}catch{}const Lt={title:"Components/Modal",component:Et,tags:["autodocs"],argTypes:{open:{control:"boolean",description:"是否顯示 Modal"},size:{control:{type:"radio"},options:["md","lg","xl","full"],description:"彈窗尺寸"},title:{control:"text",description:"標題"},children:{control:"text",description:"內容 (children)"},onClickBackdropClose:{control:"boolean",description:"點擊遮罩是否關閉"},buttons:{control:"object",description:"底部按鈕陣列 (ModalButton[])"},className:{control:"object",description:"自訂 header/footer 樣式"}}},N={args:{open:!0,title:"標準彈窗",children:"這是彈窗內容。你可以在這裡放任何 React 元素。",size:"md",onClickBackdropClose:!0,buttons:[{label:"確定",variant:"primary",onClick:()=>alert("點擊了確定")},{label:"取消",onClick:()=>alert("點擊了取消"),className:"btn-cancel"}]}};var ie,ue,se;N.parameters={...N.parameters,docs:{...(ie=N.parameters)==null?void 0:ie.docs,source:{originalSource:`{
  args: {
    open: true,
    title: "標準彈窗",
    children: "這是彈窗內容。你可以在這裡放任何 React 元素。",
    size: "md",
    onClickBackdropClose: true,
    buttons: [{
      label: "確定",
      variant: "primary",
      onClick: () => alert("點擊了確定")
    }, {
      label: "取消",
      onClick: () => alert("點擊了取消"),
      className: "btn-cancel"
    }] as ModalButton[]
  }
}`,...(se=(ue=N.parameters)==null?void 0:ue.docs)==null?void 0:se.source}}};const Nt=["Basic"];export{N as Basic,Nt as __namedExportsOrder,Lt as default};
