import{n as g,u as A,c as $,s as x,a as b,t as B,W as L,y as M,T as F,d as W,H as S}from"./keyboard-ea4pcW4v.js";import{r as c,R as w}from"./iframe-gIK4bdEr.js";import{A as U,h as _}from"./focus-management-Ddlno2iB.js";import{r as j}from"./index-BPuoX7PR.js";import{l as G}from"./transition-BSBR0-FO.js";let X=class extends Map{constructor(t){super(),this.factory=t}get(t){let n=super.get(t);return n===void 0&&(n=this.factory(t),this.set(t,n)),n}};function D(e,t){let n=e(),r=new Set;return{getSnapshot(){return n},subscribe(o){return r.add(o),()=>r.delete(o)},dispatch(o,...i){let a=t[o].call(n,...i);a&&(n=a,r.forEach(u=>u()))}}}function H(e){return c.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getSnapshot)}let q=new X(()=>D(()=>[],{ADD(e){return this.includes(e)?this:[...this,e]},REMOVE(e){let t=this.indexOf(e);if(t===-1)return this;let n=this.slice();return n.splice(t,1),n}}));function T(e,t){let n=q.get(t),r=c.useId(),o=H(n);if(g(()=>{if(e)return n.dispatch("ADD",r),()=>n.dispatch("REMOVE",r)},[n,e]),!e)return!1;let i=o.indexOf(r),a=o.length;return i===-1&&(i=a,a+=1),i===a-1}let y=new Map,v=new Map;function C(e){var t;let n=(t=v.get(e))!=null?t:0;return v.set(e,n+1),n!==0?()=>R(e):(y.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),e.setAttribute("aria-hidden","true"),e.inert=!0,()=>R(e))}function R(e){var t;let n=(t=v.get(e))!=null?t:1;if(n===1?v.delete(e):v.set(e,n-1),n!==1)return;let r=y.get(e);r&&(r["aria-hidden"]===null?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",r["aria-hidden"]),e.inert=r.inert,y.delete(e))}function Ee(e,{allowed:t,disallowed:n}={}){let r=T(e,"inert-others");g(()=>{var o,i;if(!r)return;let a=$();for(let l of(o=n==null?void 0:n())!=null?o:[])l&&a.add(C(l));let u=(i=t==null?void 0:t())!=null?i:[];for(let l of u){if(!l)continue;let d=A(l);if(!d)continue;let s=l.parentElement;for(;s&&s!==d.body;){for(let E of s.children)u.some(h=>E.contains(h))||a.add(C(E));s=s.parentElement}}return a.dispose},[r,t,n])}function N(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function J(){return/Android/gi.test(window.navigator.userAgent)}function z(){return N()||J()}function p(e,t,n,r){let o=x(n);c.useEffect(()=>{if(!e)return;function i(a){o.current(a)}return document.addEventListener(t,i,r),()=>document.removeEventListener(t,i,r)},[e,t,r])}function K(e,t,n,r){let o=x(n);c.useEffect(()=>{if(!e)return;function i(a){o.current(a)}return window.addEventListener(t,i,r),()=>window.removeEventListener(t,i,r)},[e,t,r])}const O=30;function we(e,t,n){let r=T(e,"outside-click"),o=x(n),i=c.useCallback(function(l,d){if(l.defaultPrevented)return;let s=d(l);if(s===null||!s.getRootNode().contains(s)||!s.isConnected)return;let E=function h(f){return typeof f=="function"?h(f()):Array.isArray(f)||f instanceof Set?f:[f]}(t);for(let h of E){if(h===null)continue;let f=h instanceof HTMLElement?h:h.current;if(f!=null&&f.contains(s)||l.composed&&l.composedPath().includes(f))return}return!U(s,_.Loose)&&s.tabIndex!==-1&&l.preventDefault(),o.current(l,s)},[o]),a=c.useRef(null);p(r,"pointerdown",l=>{var d,s;a.current=((s=(d=l.composedPath)==null?void 0:d.call(l))==null?void 0:s[0])||l.target},!0),p(r,"mousedown",l=>{var d,s;a.current=((s=(d=l.composedPath)==null?void 0:d.call(l))==null?void 0:s[0])||l.target},!0),p(r,"click",l=>{z()||a.current&&(i(l,()=>a.current),a.current=null)},!0);let u=c.useRef({x:0,y:0});p(r,"touchstart",l=>{u.current.x=l.touches[0].clientX,u.current.y=l.touches[0].clientY},!0),p(r,"touchend",l=>{let d={x:l.changedTouches[0].clientX,y:l.changedTouches[0].clientY};if(!(Math.abs(d.x-u.current.x)>=O||Math.abs(d.y-u.current.y)>=O))return i(l,()=>l.target instanceof HTMLElement?l.target:null)},!0),K(r,"blur",l=>i(l,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function k(...e){return c.useMemo(()=>A(...e),[...e])}function Q(){let e;return{before({doc:t}){var n;let r=t.documentElement,o=(n=t.defaultView)!=null?n:window;e=Math.max(0,o.innerWidth-r.clientWidth)},after({doc:t,d:n}){let r=t.documentElement,o=Math.max(0,r.clientWidth-r.offsetWidth),i=Math.max(0,e-o);n.style(r,"paddingRight",`${i}px`)}}}function Z(){return N()?{before({doc:e,d:t,meta:n}){function r(o){return n.containers.flatMap(i=>i()).some(i=>i.contains(o))}t.microTask(()=>{var o;if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let u=$();u.style(e.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>u.dispose()))}let i=(o=window.scrollY)!=null?o:window.pageYOffset,a=null;t.addEventListener(e,"click",u=>{if(u.target instanceof HTMLElement)try{let l=u.target.closest("a");if(!l)return;let{hash:d}=new URL(l.href),s=e.querySelector(d);s&&!r(s)&&(a=s)}catch{}},!0),t.addEventListener(e,"touchstart",u=>{if(u.target instanceof HTMLElement)if(r(u.target)){let l=u.target;for(;l.parentElement&&r(l.parentElement);)l=l.parentElement;t.style(l,"overscrollBehavior","contain")}else t.style(u.target,"touchAction","none")}),t.addEventListener(e,"touchmove",u=>{if(u.target instanceof HTMLElement){if(u.target.tagName==="INPUT")return;if(r(u.target)){let l=u.target;for(;l.parentElement&&l.dataset.headlessuiPortal!==""&&!(l.scrollHeight>l.clientHeight||l.scrollWidth>l.clientWidth);)l=l.parentElement;l.dataset.headlessuiPortal===""&&u.preventDefault()}else u.preventDefault()}},{passive:!1}),t.add(()=>{var u;let l=(u=window.scrollY)!=null?u:window.pageYOffset;i!==l&&window.scrollTo(0,i),a&&a.isConnected&&(a.scrollIntoView({block:"nearest"}),a=null)})})}}:{}}function ee(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function te(e){let t={};for(let n of e)Object.assign(t,n(t));return t}let m=D(()=>new Map,{PUSH(e,t){var n;let r=(n=this.get(e))!=null?n:{doc:e,count:0,d:$(),meta:new Set};return r.count++,r.meta.add(t),this.set(e,r),this},POP(e,t){let n=this.get(e);return n&&(n.count--,n.meta.delete(t)),this},SCROLL_PREVENT({doc:e,d:t,meta:n}){let r={doc:e,d:t,meta:te(n)},o=[Z(),Q(),ee()];o.forEach(({before:i})=>i==null?void 0:i(r)),o.forEach(({after:i})=>i==null?void 0:i(r))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});m.subscribe(()=>{let e=m.getSnapshot(),t=new Map;for(let[n]of e)t.set(n,n.documentElement.style.overflow);for(let n of e.values()){let r=t.get(n.doc)==="hidden",o=n.count!==0;(o&&!r||!o&&r)&&m.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&m.dispatch("TEARDOWN",n)}});function ne(e,t,n=()=>({containers:[]})){let r=H(m),o=t?r.get(t):void 0,i=o?o.count>0:!1;return g(()=>{if(!(!t||!e))return m.dispatch("PUSH",t,n),()=>m.dispatch("POP",t,n)},[e,t]),i}function be(e,t,n=()=>[document.body]){let r=T(e,"scroll-lock");ne(r,t,o=>{var i;return{containers:[...(i=o.containers)!=null?i:[],n]}})}function re(e){let t=b(e),n=c.useRef(!1);c.useEffect(()=>(n.current=!1,()=>{n.current=!0,B(()=>{n.current&&t()})}),[t])}let I=c.createContext(!1);function le(){return c.useContext(I)}function ye(e){return w.createElement(I.Provider,{value:e.force},e.children)}function oe(e){let t=le(),n=c.useContext(Y),r=k(e),[o,i]=c.useState(()=>{var a;if(!t&&n!==null)return(a=n.current)!=null?a:null;if(W.isServer)return null;let u=r==null?void 0:r.getElementById("headlessui-portal-root");if(u)return u;if(r===null)return null;let l=r.createElement("div");return l.setAttribute("id","headlessui-portal-root"),r.body.appendChild(l)});return c.useEffect(()=>{o!==null&&(r!=null&&r.body.contains(o)||r==null||r.body.appendChild(o))},[o,r]),c.useEffect(()=>{t||n!==null&&i(n.current)},[n,i,t]),o}let V=c.Fragment,ie=L(function(e,t){let n=e,r=c.useRef(null),o=M(F(s=>{r.current=s}),t),i=k(r),a=oe(r),[u]=c.useState(()=>{var s;return W.isServer?null:(s=i==null?void 0:i.createElement("div"))!=null?s:null}),l=c.useContext(P),d=G();return g(()=>{!a||!u||a.contains(u)||(u.setAttribute("data-headlessui-portal",""),a.appendChild(u))},[a,u]),g(()=>{if(u&&l)return l.register(u)},[l,u]),re(()=>{var s;!a||!u||(u instanceof Node&&a.contains(u)&&a.removeChild(u),a.childNodes.length<=0&&((s=a.parentElement)==null||s.removeChild(a)))}),d?!a||!u?null:j.createPortal(S({ourProps:{ref:o},theirProps:n,slot:{},defaultTag:V,name:"Portal"}),u):null});function ue(e,t){let n=M(t),{enabled:r=!0,...o}=e;return r?w.createElement(ie,{...o,ref:n}):S({ourProps:{ref:n},theirProps:o,slot:{},defaultTag:V,name:"Portal"})}let ae=c.Fragment,Y=c.createContext(null);function se(e,t){let{target:n,...r}=e,o={ref:M(t)};return w.createElement(Y.Provider,{value:n},S({ourProps:o,theirProps:r,defaultTag:ae,name:"Popover.Group"}))}let P=c.createContext(null);function Pe(){let e=c.useContext(P),t=c.useRef([]),n=b(i=>(t.current.push(i),e&&e.register(i),()=>r(i))),r=b(i=>{let a=t.current.indexOf(i);a!==-1&&t.current.splice(a,1),e&&e.unregister(i)}),o=c.useMemo(()=>({register:n,unregister:r,portals:t}),[n,r,t]);return[t,c.useMemo(()=>function({children:i}){return w.createElement(P.Provider,{value:o},i)},[o])]}let ce=L(ue),de=L(se),$e=Object.assign(ce,{Group:de});export{we as F,de as J,z as a,re as c,Pe as e,be as f,ye as l,k as n,K as s,$e as t,T as x,Ee as y};
