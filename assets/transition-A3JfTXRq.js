import{r as t,a as Z,R as p}from"./index-DRjF_FHU.js";import{s as q,b as ve,c as k,n as P,M as he,W as D,y as ee,O as S,o as $,V as me,m as pe,t as be,A as ge,i as y,d as Ee,H as ne,u as te,p as Re,e as re}from"./open-closed-12XbF_VX.js";function Te(e,n,r){let i=q(d=>{let f=d.getBoundingClientRect();f.x===0&&f.y===0&&f.width===0&&f.height===0&&r()});t.useEffect(()=>{if(!e)return;let d=n===null?null:n instanceof HTMLElement?n:n.current;if(!d)return;let f=ve();if(typeof ResizeObserver<"u"){let c=new ResizeObserver(()=>i.current(d));c.observe(d),f.add(()=>c.disconnect())}if(typeof IntersectionObserver<"u"){let c=new IntersectionObserver(()=>i.current(d));c.observe(d),f.add(()=>c.disconnect())}return()=>f.dispose()},[n,i,e])}function we(){let e=typeof document>"u";return"useSyncExternalStore"in Z?(n=>n.useSyncExternalStore)(Z)(()=>()=>{},()=>!1,()=>!e):!1}function le(){let e=we(),[n,r]=t.useState(k.isHandoffComplete);return n&&k.isHandoffComplete===!1&&r(!1),t.useEffect(()=>{n!==!0&&r(!0)},[n]),t.useEffect(()=>k.handoff(),[]),e?!1:n}function Ce(){let e=t.useRef(!1);return P(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function ie(e){var n;return!!(e.enter||e.enterFrom||e.enterTo||e.leave||e.leaveFrom||e.leaveTo)||((n=e.as)!=null?n:se)!==t.Fragment||p.Children.count(e.children)===1}let I=t.createContext(null);I.displayName="TransitionContext";var $e=(e=>(e.Visible="visible",e.Hidden="hidden",e))($e||{});function xe(){let e=t.useContext(I);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function Se(){let e=t.useContext(N);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let N=t.createContext(null);N.displayName="NestingContext";function U(e){return"children"in e?U(e.children):e.current.filter(({el:n})=>n.current!==null).filter(({state:n})=>n==="visible").length>0}function ue(e,n){let r=q(e),i=t.useRef([]),d=Ce(),f=Re(),c=$((a,l=S.Hidden)=>{let o=i.current.findIndex(({el:u})=>u===a);o!==-1&&(re(l,{[S.Unmount](){i.current.splice(o,1)},[S.Hidden](){i.current[o].state="hidden"}}),f.microTask(()=>{var u;!U(i)&&d.current&&((u=r.current)==null||u.call(r))}))}),x=$(a=>{let l=i.current.find(({el:o})=>o===a);return l?l.state!=="visible"&&(l.state="visible"):i.current.push({el:a,state:"visible"}),()=>c(a,S.Unmount)}),R=t.useRef([]),h=t.useRef(Promise.resolve()),b=t.useRef({enter:[],leave:[]}),g=$((a,l,o)=>{R.current.splice(0),n&&(n.chains.current[l]=n.chains.current[l].filter(([u])=>u!==a)),n==null||n.chains.current[l].push([a,new Promise(u=>{R.current.push(u)})]),n==null||n.chains.current[l].push([a,new Promise(u=>{Promise.all(b.current[l].map(([s,m])=>m)).then(()=>u())})]),l==="enter"?h.current=h.current.then(()=>n==null?void 0:n.wait.current).then(()=>o(l)):o(l)}),T=$((a,l,o)=>{Promise.all(b.current[l].splice(0).map(([u,s])=>s)).then(()=>{var u;(u=R.current.shift())==null||u()}).then(()=>o(l))});return t.useMemo(()=>({children:i,register:x,unregister:c,onStart:g,onStop:T,wait:h,chains:b}),[x,c,i,g,T,b,h])}let se=t.Fragment,ae=he.RenderStrategy;function ye(e,n){var r,i;let{transition:d=!0,beforeEnter:f,afterEnter:c,beforeLeave:x,afterLeave:R,enter:h,enterFrom:b,enterTo:g,entered:T,leave:a,leaveFrom:l,leaveTo:o,...u}=e,s=t.useRef(null),m=ie(e),V=ee(...m?[s,n]:n===null?[]:[n]),w=(r=u.unmount)==null||r?S.Unmount:S.Hidden,{show:E,appear:G,initial:J}=xe(),[C,z]=t.useState(E?"visible":"hidden"),K=Se(),{register:H,unregister:L}=K;P(()=>H(s),[H,s]),P(()=>{if(w===S.Hidden&&s.current){if(E&&C!=="visible"){z("visible");return}return re(C,{hidden:()=>L(s),visible:()=>H(s)})}},[C,s,H,L,E,w]);let X=le();P(()=>{if(m&&X&&C==="visible"&&s.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[s,C,X,m]);let ce=J&&!G,Q=G&&E&&J,j=t.useRef(!1),M=ue(()=>{j.current||(z("hidden"),L(s))},K),W=$(_=>{j.current=!0;let A=_?"enter":"leave";M.onStart(s,A,F=>{F==="enter"?f==null||f():F==="leave"&&(x==null||x())})}),Y=$(_=>{let A=_?"enter":"leave";j.current=!1,M.onStop(s,A,F=>{F==="enter"?c==null||c():F==="leave"&&(R==null||R())}),A==="leave"&&!U(M)&&(z("hidden"),L(s))});t.useEffect(()=>{m&&d||(W(E),Y(E))},[E,m,d]);let de=!(!d||!m||!X||ce),[,v]=me(de,s,E,{start:W,end:Y}),fe=pe({ref:V,className:((i=be(u.className,Q&&h,Q&&b,v.enter&&h,v.enter&&v.closed&&b,v.enter&&!v.closed&&g,v.leave&&a,v.leave&&!v.closed&&l,v.leave&&v.closed&&o,!v.transition&&E&&T))==null?void 0:i.trim())||void 0,...ge(v)}),O=0;return C==="visible"&&(O|=y.Open),C==="hidden"&&(O|=y.Closed),v.enter&&(O|=y.Opening),v.leave&&(O|=y.Closing),p.createElement(N.Provider,{value:M},p.createElement(Ee,{value:O},ne({ourProps:fe,theirProps:u,defaultTag:se,features:ae,visible:C==="visible",name:"Transition.Child"})))}function Pe(e,n){let{show:r,appear:i=!1,unmount:d=!0,...f}=e,c=t.useRef(null),x=ie(e),R=ee(...x?[c,n]:n===null?[]:[n]);le();let h=te();if(r===void 0&&h!==null&&(r=(h&y.Open)===y.Open),r===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[b,g]=t.useState(r?"visible":"hidden"),T=ue(()=>{r||g("hidden")}),[a,l]=t.useState(!0),o=t.useRef([r]);P(()=>{a!==!1&&o.current[o.current.length-1]!==r&&(o.current.push(r),l(!1))},[o,r]);let u=t.useMemo(()=>({show:r,appear:i,initial:a}),[r,i,a]);Te(r,c,()=>g("hidden")),P(()=>{r?g("visible"):!U(T)&&c.current!==null&&g("hidden")},[r,T]);let s={unmount:d},m=$(()=>{var w;a&&l(!1),(w=e.beforeEnter)==null||w.call(e)}),V=$(()=>{var w;a&&l(!1),(w=e.beforeLeave)==null||w.call(e)});return p.createElement(N.Provider,{value:T},p.createElement(I.Provider,{value:u},ne({ourProps:{...s,as:t.Fragment,children:p.createElement(oe,{ref:R,...s,...f,beforeEnter:m,beforeLeave:V})},theirProps:{},defaultTag:t.Fragment,features:ae,visible:b==="visible",name:"Transition"})))}function Oe(e,n){let r=t.useContext(I)!==null,i=te()!==null;return p.createElement(p.Fragment,null,!r&&i?p.createElement(B,{ref:n,...e}):p.createElement(oe,{ref:n,...e}))}let B=D(Pe),oe=D(ye),Fe=D(Oe),Me=Object.assign(B,{Child:Fe,Root:B});export{Fe as I,Me as X,Ce as f,le as l,Te as m};
