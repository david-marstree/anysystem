import{j as g}from"./jsx-runtime-DR9Q75dM.js";import{r as m,R as M}from"./index-DRjF_FHU.js";import{t as ie}from"./bundle-mjs-3VKOpVsw.js";import{G as ce}from"./iconBase-yPxZrzXe.js";import{b as ze,L as Ye}from"./Label-B74eOFRC.js";import{$ as qe,a as Pe,r as Qe,w as Xe,T as et}from"./use-resolve-button-type-DRx0-JiP.js";import{r as X}from"./index-CmHj60O0.js";import{l as tt,T as nt,a as ot,e as F,z as it,v as lt,j as rt,u as st,y as at,I as ye,x as ut,R as dt,c as ct,f as Me,b as _e,q as pt,d as ft,K as mt,g as Ae,_ as ht}from"./lodash-BHNxmqSH.js";import{o as E,n as J,g as vt,M as Ve,W as re,e as te,d as gt,i as de,H as se,y as pe,p as bt,a as z,D as Se,u as xt,V as yt,A as St,s as Ct,b as Fe}from"./open-closed-12XbF_VX.js";import{a as Et,F as Rt,n as je,G as Ot,b as It,y as Tt,t as wt,k as Mt,_ as _t}from"./portal-BoPUeaCu.js";import{m as At,X as Ne}from"./transition-A3JfTXRq.js";import{E as Vt,m as ke,r as $e}from"./active-element-history-xULc_U8s.js";import{g as Ft}from"./index-BhDvn_Ny.js";function oe(e,i,t){let n=t.initialDeps??[],o;return()=>{var r,s,l,a;let f;t.key&&((r=t.debug)!=null&&r.call(t))&&(f=Date.now());const c=e();if(!(c.length!==n.length||c.some((u,b)=>n[b]!==u)))return o;n=c;let d;if(t.key&&((s=t.debug)!=null&&s.call(t))&&(d=Date.now()),o=i(...c),t.key&&((l=t.debug)!=null&&l.call(t))){const u=Math.round((Date.now()-f)*100)/100,b=Math.round((Date.now()-d)*100)/100,C=b/16,v=(T,L)=>{for(T=String(T);T.length<L;)T=" "+T;return T};console.info(`%c⏱ ${v(b,5)} /${v(u,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*C,120))}deg 100% 31%);`,t==null?void 0:t.key)}return(a=t==null?void 0:t.onChange)==null||a.call(t,o),o}}function he(e,i){if(e===void 0)throw new Error("Unexpected undefined");return e}const kt=(e,i)=>Math.abs(e-i)<1,$t=(e,i,t)=>{let n;return function(...o){e.clearTimeout(n),n=e.setTimeout(()=>i.apply(this,o),t)}},Lt=e=>e,zt=e=>{const i=Math.max(e.startIndex-e.overscan,0),t=Math.min(e.endIndex+e.overscan,e.count-1),n=[];for(let o=i;o<=t;o++)n.push(o);return n},qt=(e,i)=>{const t=e.scrollElement;if(!t)return;const n=e.targetWindow;if(!n)return;const o=s=>{const{width:l,height:a}=s;i({width:Math.round(l),height:Math.round(a)})};if(o(t.getBoundingClientRect()),!n.ResizeObserver)return()=>{};const r=new n.ResizeObserver(s=>{const l=s[0];if(l!=null&&l.borderBoxSize){const a=l.borderBoxSize[0];if(a){o({width:a.inlineSize,height:a.blockSize});return}}o(t.getBoundingClientRect())});return r.observe(t,{box:"border-box"}),()=>{r.unobserve(t)}},Le={passive:!0},Pt=typeof window>"u"?!0:"onscrollend"in window,jt=(e,i)=>{const t=e.scrollElement;if(!t)return;const n=e.targetWindow;if(!n)return;let o=0;const r=Pt?()=>{}:$t(n,()=>{i(o,!1)},e.options.isScrollingResetDelay),s=f=>()=>{o=t[e.options.horizontal?"scrollLeft":"scrollTop"],r(),i(o,f)},l=s(!0),a=s(!1);return a(),t.addEventListener("scroll",l,Le),t.addEventListener("scrollend",a,Le),()=>{t.removeEventListener("scroll",l),t.removeEventListener("scrollend",a)}},Nt=(e,i,t)=>{if(i!=null&&i.borderBoxSize){const n=i.borderBoxSize[0];if(n)return Math.round(n[t.options.horizontal?"inlineSize":"blockSize"])}return Math.round(e.getBoundingClientRect()[t.options.horizontal?"width":"height"])},Dt=(e,{adjustments:i=0,behavior:t},n)=>{var o,r;const s=e+i;(r=(o=n.scrollElement)==null?void 0:o.scrollTo)==null||r.call(o,{[n.options.horizontal?"left":"top"]:s,behavior:t})};class Bt{constructor(i){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let t=null;const n=()=>t||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:t=new this.targetWindow.ResizeObserver(o=>{o.forEach(r=>{this._measureElement(r.target,r)})}));return{disconnect:()=>{var o;return(o=n())==null?void 0:o.disconnect()},observe:o=>{var r;return(r=n())==null?void 0:r.observe(o,{box:"border-box"})},unobserve:o=>{var r;return(r=n())==null?void 0:r.unobserve(o)}}})(),this.range=null,this.setOptions=t=>{Object.entries(t).forEach(([n,o])=>{typeof o>"u"&&delete t[n]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:Lt,rangeExtractor:zt,onChange:()=>{},measureElement:Nt,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,...t}},this.notify=(t,n)=>{var o,r;const{startIndex:s,endIndex:l}=this.range??{startIndex:void 0,endIndex:void 0},a=this.calculateRange();(t||s!==(a==null?void 0:a.startIndex)||l!==(a==null?void 0:a.endIndex))&&((r=(o=this.options).onChange)==null||r.call(o,this,n))},this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(t=>t()),this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.observer.disconnect(),this.elementsCache.clear()},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var t;const n=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==n){if(this.cleanup(),!n){this.notify(!1,!1);return}this.scrollElement=n,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((t=this.scrollElement)==null?void 0:t.window)??null,this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,o=>{this.scrollRect=o,this.notify(!1,!1)})),this.unsubs.push(this.options.observeElementOffset(this,(o,r)=>{this.scrollAdjustments=0,this.scrollDirection=r?this.getScrollOffset()<o?"forward":"backward":null,this.scrollOffset=o;const s=this.isScrolling;this.isScrolling=r,this.notify(s!==r,r)}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(t,n)=>{const o=new Map,r=new Map;for(let s=n-1;s>=0;s--){const l=t[s];if(o.has(l.lane))continue;const a=r.get(l.lane);if(a==null||l.end>a.end?r.set(l.lane,l):l.end<a.end&&o.set(l.lane,!0),o.size===this.options.lanes)break}return r.size===this.options.lanes?Array.from(r.values()).sort((s,l)=>s.end===l.end?s.index-l.index:s.end-l.end)[0]:void 0},this.getMeasurementOptions=oe(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(t,n,o,r,s)=>(this.pendingMeasuredCacheIndexes=[],{count:t,paddingStart:n,scrollMargin:o,getItemKey:r,enabled:s}),{key:!1}),this.getMeasurements=oe(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:t,paddingStart:n,scrollMargin:o,getItemKey:r,enabled:s},l)=>{var a;if(!s)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(p=>{this.itemSizeCache.set(p.key,p.size)}));const f=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const c=this.measurementsCache.slice(0,f);for(let p=f;p<t;p++){let d=(a=this.measurementsCache[p])==null?void 0:a.measureElement;d||(d=O=>{const w=r(p),R=this.elementsCache.get(w);if(!O){R&&(this.observer.unobserve(R),this.elementsCache.delete(w));return}R!==O&&(R&&this.observer.unobserve(R),this.observer.observe(O),this.elementsCache.set(w,O)),O.isConnected&&this.resizeItem(p,this.options.measureElement(O,void 0,this))});const u=r(p),b=this.options.lanes===1?c[p-1]:this.getFurthestMeasurement(c,p),C=b?b.end+this.options.gap:n+o,v=l.get(u),T=typeof v=="number"?v:this.options.estimateSize(p),L=C+T,V=b?b.lane:p%this.options.lanes;c[p]={index:p,start:C,size:T,end:L,key:u,lane:V,measureElement:d}}return this.measurementsCache=c,c},{key:!1,debug:()=>this.options.debug}),this.calculateRange=oe(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset()],(t,n,o)=>this.range=t.length>0&&n>0?Ht({measurements:t,outerSize:n,scrollOffset:o}):null,{key:!1,debug:()=>this.options.debug}),this.getIndexes=oe(()=>[this.options.rangeExtractor,this.calculateRange(),this.options.overscan,this.options.count],(t,n,o,r)=>n===null?[]:t({startIndex:n.startIndex,endIndex:n.endIndex,overscan:o,count:r}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=t=>{const n=this.options.indexAttribute,o=t.getAttribute(n);return o?parseInt(o,10):(console.warn(`Missing attribute name '${n}={index}' on measured element.`),-1)},this._measureElement=(t,n)=>{const o=this.indexFromElement(t),r=this.getMeasurements()[o];if(!r||!t.isConnected){this.elementsCache.forEach((l,a)=>{l===t&&(this.observer.unobserve(t),this.elementsCache.delete(a))});return}const s=this.elementsCache.get(r.key);s!==t&&(s&&this.observer.unobserve(s),this.observer.observe(t),this.elementsCache.set(r.key,t)),this.resizeItem(o,this.options.measureElement(t,n,this))},this.resizeItem=(t,n)=>{const o=this.getMeasurements()[t];if(!o)return;const r=this.itemSizeCache.get(o.key)??o.size,s=n-r;s!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(o,s,this):o.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=s,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(o.index),this.itemSizeCache=new Map(this.itemSizeCache.set(o.key,n)),this.notify(!0,!1))},this.measureElement=t=>{t&&this._measureElement(t,void 0)},this.getVirtualItems=oe(()=>[this.getIndexes(),this.getMeasurements()],(t,n)=>{const o=[];for(let r=0,s=t.length;r<s;r++){const l=t[r],a=n[l];o.push(a)}return o},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=t=>{const n=this.getMeasurements();if(n.length!==0)return he(n[De(0,n.length-1,o=>he(n[o]).start,t)])},this.getOffsetForAlignment=(t,n)=>{const o=this.getSize(),r=this.getScrollOffset();n==="auto"&&(t<=r?n="start":t>=r+o?n="end":n="start"),n==="start"?t=t:n==="end"?t=t-o:n==="center"&&(t=t-o/2);const s=this.options.horizontal?"scrollWidth":"scrollHeight",a=(this.scrollElement?"document"in this.scrollElement?this.scrollElement.document.documentElement[s]:this.scrollElement[s]:0)-o;return Math.max(Math.min(a,t),0)},this.getOffsetForIndex=(t,n="auto")=>{t=Math.max(0,Math.min(t,this.options.count-1));const o=this.getMeasurements()[t];if(!o)return;const r=this.getSize(),s=this.getScrollOffset();if(n==="auto")if(o.end>=s+r-this.options.scrollPaddingEnd)n="end";else if(o.start<=s+this.options.scrollPaddingStart)n="start";else return[s,n];const l=n==="end"?o.end+this.options.scrollPaddingEnd:o.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(l,n),n]},this.isDynamicMode=()=>this.elementsCache.size>0,this.cancelScrollToIndex=()=>{this.scrollToIndexTimeoutId!==null&&this.targetWindow&&(this.targetWindow.clearTimeout(this.scrollToIndexTimeoutId),this.scrollToIndexTimeoutId=null)},this.scrollToOffset=(t,{align:n="start",behavior:o}={})=>{this.cancelScrollToIndex(),o==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(t,n),{adjustments:void 0,behavior:o})},this.scrollToIndex=(t,{align:n="auto",behavior:o}={})=>{t=Math.max(0,Math.min(t,this.options.count-1)),this.cancelScrollToIndex(),o==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");const r=this.getOffsetForIndex(t,n);if(!r)return;const[s,l]=r;this._scrollToOffset(s,{adjustments:void 0,behavior:o}),o!=="smooth"&&this.isDynamicMode()&&this.targetWindow&&(this.scrollToIndexTimeoutId=this.targetWindow.setTimeout(()=>{if(this.scrollToIndexTimeoutId=null,this.elementsCache.has(this.options.getItemKey(t))){const[f]=he(this.getOffsetForIndex(t,l));kt(f,this.getScrollOffset())||this.scrollToIndex(t,{align:l,behavior:o})}else this.scrollToIndex(t,{align:l,behavior:o})}))},this.scrollBy=(t,{behavior:n}={})=>{this.cancelScrollToIndex(),n==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+t,{adjustments:void 0,behavior:n})},this.getTotalSize=()=>{var t;const n=this.getMeasurements();let o;return n.length===0?o=this.options.paddingStart:o=this.options.lanes===1?((t=n[n.length-1])==null?void 0:t.end)??0:Math.max(...n.slice(-this.options.lanes).map(r=>r.end)),o-this.options.scrollMargin+this.options.paddingEnd},this._scrollToOffset=(t,{adjustments:n,behavior:o})=>{this.options.scrollToFn(t,{behavior:o,adjustments:n},this)},this.measure=()=>{var t,n;this.itemSizeCache=new Map,(n=(t=this.options).onChange)==null||n.call(t,this,!1)},this.setOptions(i)}}const De=(e,i,t,n)=>{for(;e<=i;){const o=(e+i)/2|0,r=t(o);if(r<n)e=o+1;else if(r>n)i=o-1;else return o}return e>0?e-1:0};function Ht({measurements:e,outerSize:i,scrollOffset:t}){const n=e.length-1,r=De(0,n,l=>e[l].start,t);let s=r;for(;s<n&&e[s].end<t+i;)s++;return{startIndex:r,endIndex:s}}const Wt=typeof document<"u"?m.useLayoutEffect:m.useEffect;function Ut(e){const i=m.useReducer(()=>({}),{})[1],t={...e,onChange:(o,r)=>{var s;r?X.flushSync(i):i(),(s=e.onChange)==null||s.call(e,o,r)}},[n]=m.useState(()=>new Bt(t));return n.setOptions(t),m.useEffect(()=>n._didMount(),[]),Wt(()=>n._willUpdate()),n}function Kt(e){return Ut({observeElementRect:qt,observeElementOffset:jt,scrollToFn:Dt,...e})}function Be(e){let i=m.useRef({value:"",selectionStart:null,selectionEnd:null});return Vt(e.current,"blur",t=>{let n=t.target;n instanceof HTMLInputElement&&(i.current={value:n.value,selectionStart:n.selectionStart,selectionEnd:n.selectionEnd})}),E(()=>{let t=e.current;if(document.activeElement!==t&&t instanceof HTMLInputElement&&t.isConnected){if(t.focus({preventScroll:!0}),t.value!==i.current.value)t.setSelectionRange(t.value.length,t.value.length);else{let{selectionStart:n,selectionEnd:o}=i.current;n!==null&&o!==null&&t.setSelectionRange(n,o)}i.current={value:"",selectionStart:null,selectionEnd:null}}})}function Gt(e,{container:i,accept:t,walk:n}){let o=m.useRef(t),r=m.useRef(n);m.useEffect(()=>{o.current=t,r.current=n},[t,n]),J(()=>{if(!i||!e)return;let s=vt(i);if(!s)return;let l=o.current,a=r.current,f=Object.assign(p=>l(p),{acceptNode:l}),c=s.createTreeWalker(i,NodeFilter.SHOW_ELEMENT,f,!1);for(;c.nextNode();)a(c.currentNode)},[i,e,o,r])}var Ce=(e=>(e[e.Left=0]="Left",e[e.Right=2]="Right",e))(Ce||{}),Jt={},Zt=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Zt||{}),Yt=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(Yt||{}),Qt=(e=>(e[e.Pointer=0]="Pointer",e[e.Focus=1]="Focus",e[e.Other=2]="Other",e))(Qt||{}),Xt=(e=>(e[e.OpenCombobox=0]="OpenCombobox",e[e.CloseCombobox=1]="CloseCombobox",e[e.GoToOption=2]="GoToOption",e[e.SetTyping=3]="SetTyping",e[e.RegisterOption=4]="RegisterOption",e[e.UnregisterOption=5]="UnregisterOption",e[e.SetActivationTrigger=6]="SetActivationTrigger",e[e.UpdateVirtualConfiguration=7]="UpdateVirtualConfiguration",e))(Xt||{});function ve(e,i=t=>t){let t=e.activeOptionIndex!==null?e.options[e.activeOptionIndex]:null,n=i(e.options.slice()),o=n.length>0&&n[0].dataRef.current.order!==null?n.sort((s,l)=>s.dataRef.current.order-l.dataRef.current.order):_t(n,s=>s.dataRef.current.domRef.current),r=t?o.indexOf(t):null;return r===-1&&(r=null),{options:o,activeOptionIndex:r}}let en={1(e){var i;return(i=e.dataRef.current)!=null&&i.disabled||e.comboboxState===1?e:{...e,activeOptionIndex:null,comboboxState:1,isTyping:!1,activationTrigger:2,__demoMode:!1}},0(e){var i,t;if((i=e.dataRef.current)!=null&&i.disabled||e.comboboxState===0)return e;if((t=e.dataRef.current)!=null&&t.value){let n=e.dataRef.current.calculateIndex(e.dataRef.current.value);if(n!==-1)return{...e,activeOptionIndex:n,comboboxState:0,__demoMode:!1}}return{...e,comboboxState:0,__demoMode:!1}},3(e,i){return e.isTyping===i.isTyping?e:{...e,isTyping:i.isTyping}},2(e,i){var t,n,o,r,s;if((t=e.dataRef.current)!=null&&t.disabled||(n=e.dataRef.current)!=null&&n.optionsRef.current&&!((o=e.dataRef.current)!=null&&o.optionsPropsRef.current.static)&&e.comboboxState===1)return e;if(e.virtual){let{options:c,disabled:p}=e.virtual,d=i.focus===F.Specific?i.idx:Ae(i,{resolveItems:()=>c,resolveActiveIndex:()=>{var b,C;return(C=(b=e.activeOptionIndex)!=null?b:c.findIndex(v=>!p(v)))!=null?C:null},resolveDisabled:p,resolveId(){throw new Error("Function not implemented.")}}),u=(r=i.trigger)!=null?r:2;return e.activeOptionIndex===d&&e.activationTrigger===u?e:{...e,activeOptionIndex:d,activationTrigger:u,isTyping:!1,__demoMode:!1}}let l=ve(e);if(l.activeOptionIndex===null){let c=l.options.findIndex(p=>!p.dataRef.current.disabled);c!==-1&&(l.activeOptionIndex=c)}let a=i.focus===F.Specific?i.idx:Ae(i,{resolveItems:()=>l.options,resolveActiveIndex:()=>l.activeOptionIndex,resolveId:c=>c.id,resolveDisabled:c=>c.dataRef.current.disabled}),f=(s=i.trigger)!=null?s:2;return e.activeOptionIndex===a&&e.activationTrigger===f?e:{...e,...l,isTyping:!1,activeOptionIndex:a,activationTrigger:f,__demoMode:!1}},4:(e,i)=>{var t,n,o;if((t=e.dataRef.current)!=null&&t.virtual)return{...e,options:[...e.options,i.payload]};let r=i.payload,s=ve(e,a=>(a.push(r),a));e.activeOptionIndex===null&&(n=e.dataRef.current)!=null&&n.isSelected(i.payload.dataRef.current.value)&&(s.activeOptionIndex=s.options.indexOf(r));let l={...e,...s,activationTrigger:2};return(o=e.dataRef.current)!=null&&o.__demoMode&&e.dataRef.current.value===void 0&&(l.activeOptionIndex=0),l},5:(e,i)=>{var t;if((t=e.dataRef.current)!=null&&t.virtual)return{...e,options:e.options.filter(o=>o.id!==i.id)};let n=ve(e,o=>{let r=o.findIndex(s=>s.id===i.id);return r!==-1&&o.splice(r,1),o});return{...e,...n,activationTrigger:2}},6:(e,i)=>e.activationTrigger===i.trigger?e:{...e,activationTrigger:i.trigger},7:(e,i)=>{var t,n;if(e.virtual===null)return{...e,virtual:{options:i.options,disabled:(t=i.disabled)!=null?t:()=>!1}};if(e.virtual.options===i.options&&e.virtual.disabled===i.disabled)return e;let o=e.activeOptionIndex;if(e.activeOptionIndex!==null){let r=i.options.indexOf(e.virtual.options[e.activeOptionIndex]);r!==-1?o=r:o=null}return{...e,activeOptionIndex:o,virtual:{options:i.options,disabled:(n=i.disabled)!=null?n:()=>!1}}}},Ee=m.createContext(null);Ee.displayName="ComboboxActionsContext";function ae(e){let i=m.useContext(Ee);if(i===null){let t=new Error(`<${e} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,ae),t}return i}let He=m.createContext(null);function tn(e){let i=ne("VirtualProvider"),{options:t}=i.virtual,[n,o]=m.useMemo(()=>{let f=i.optionsRef.current;if(!f)return[0,0];let c=window.getComputedStyle(f);return[parseFloat(c.paddingBlockStart||c.paddingTop),parseFloat(c.paddingBlockEnd||c.paddingBottom)]},[i.optionsRef.current]),r=Kt({enabled:t.length!==0,scrollPaddingStart:n,scrollPaddingEnd:o,count:t.length,estimateSize(){return 40},getScrollElement(){var f;return(f=i.optionsRef.current)!=null?f:null},overscan:12}),[s,l]=m.useState(0);J(()=>{l(f=>f+1)},[t]);let a=r.getVirtualItems();return a.length===0?null:M.createElement(He.Provider,{value:r},M.createElement("div",{style:{position:"relative",width:"100%",height:`${r.getTotalSize()}px`},ref:f=>{if(f){if(typeof process<"u"&&Jt.JEST_WORKER_ID!==void 0||i.activationTrigger===0)return;i.activeOptionIndex!==null&&t.length>i.activeOptionIndex&&r.scrollToIndex(i.activeOptionIndex)}}},a.map(f=>{var c;return M.createElement(m.Fragment,{key:f.key},M.cloneElement((c=e.children)==null?void 0:c.call(e,{...e.slot,option:t[f.index]}),{key:`${s}-${f.key}`,"data-index":f.index,"aria-setsize":t.length,"aria-posinset":f.index+1,style:{position:"absolute",top:0,left:0,transform:`translateY(${f.start}px)`,overflowAnchor:"none"}}))})))}let le=m.createContext(null);le.displayName="ComboboxDataContext";function ne(e){let i=m.useContext(le);if(i===null){let t=new Error(`<${e} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,ne),t}return i}function nn(e,i){return te(i.type,en,e,i)}let on=m.Fragment;function ln(e,i){var t,n;let o=Et(),{value:r,defaultValue:s,onChange:l,form:a,name:f,by:c,disabled:p=o||!1,onClose:d,__demoMode:u=!1,multiple:b=!1,immediate:C=!1,virtual:v=null,nullable:T,...L}=e,V=tt(s),[O=b?[]:void 0,w]=nt(r,l,V),[R,S]=m.useReducer(nn,{dataRef:m.createRef(),comboboxState:u?0:1,isTyping:!1,options:[],virtual:v?{options:v.options,disabled:(t=v.disabled)!=null?t:()=>!1}:null,activeOptionIndex:null,activationTrigger:2,__demoMode:u}),N=m.useRef(!1),G=m.useRef({static:!1,hold:!1}),Z=m.useRef(null),H=m.useRef(null),Y=m.useRef(null),q=ot(c),_=E(y=>v?c===null?v.options.indexOf(y):v.options.findIndex(I=>q(I,y)):R.options.findIndex(I=>q(I.dataRef.current.value,y))),P=m.useCallback(y=>te(x.mode,{1:()=>O.some(I=>q(I,y)),0:()=>q(O,y)}),[O]),Q=E(y=>R.activeOptionIndex===_(y)),x=m.useMemo(()=>({...R,immediate:C,optionsPropsRef:G,inputRef:Z,buttonRef:H,optionsRef:Y,value:O,defaultValue:V,disabled:p,mode:b?1:0,virtual:v?R.virtual:null,get activeOptionIndex(){if(N.current&&R.activeOptionIndex===null&&(v?v.options.length>0:R.options.length>0)){if(v){let I=v.options.findIndex(U=>{var ue,we;return!((we=(ue=v.disabled)==null?void 0:ue.call(v,U))!=null&&we)});if(I!==-1)return I}let y=R.options.findIndex(I=>!I.dataRef.current.disabled);if(y!==-1)return y}return R.activeOptionIndex},calculateIndex:_,compare:q,isSelected:P,isActive:Q}),[O,V,p,b,u,R,v]);J(()=>{var y;v&&S({type:7,options:v.options,disabled:(y=v.disabled)!=null?y:null})},[v,v==null?void 0:v.options,v==null?void 0:v.disabled]),J(()=>{R.dataRef.current=x},[x]);let ee=x.comboboxState===0;Rt(ee,[x.buttonRef,x.inputRef,x.optionsRef],()=>W.closeCombobox());let $=m.useMemo(()=>{var y,I,U;return{open:x.comboboxState===0,disabled:p,activeIndex:x.activeOptionIndex,activeOption:x.activeOptionIndex===null?null:x.virtual?x.virtual.options[(y=x.activeOptionIndex)!=null?y:0]:(U=(I=x.options[x.activeOptionIndex])==null?void 0:I.dataRef.current.value)!=null?U:null,value:O}},[x,p,O]),fe=E(()=>{if(x.activeOptionIndex!==null){if(W.setIsTyping(!1),x.virtual)A(x.virtual.options[x.activeOptionIndex]);else{let{dataRef:y}=x.options[x.activeOptionIndex];A(y.current.value)}W.goToOption(F.Specific,x.activeOptionIndex)}}),me=E(()=>{S({type:0}),N.current=!0}),h=E(()=>{S({type:1}),N.current=!1,d==null||d()}),D=E(y=>{S({type:3,isTyping:y})}),k=E((y,I,U)=>(N.current=!1,y===F.Specific?S({type:2,focus:F.Specific,idx:I,trigger:U}):S({type:2,focus:y,trigger:U}))),B=E((y,I)=>(S({type:4,payload:{id:y,dataRef:I}}),()=>{x.isActive(I.current.value)&&(N.current=!0),S({type:5,id:y})})),A=E(y=>te(x.mode,{0(){return w==null?void 0:w(y)},1(){let I=x.value.slice(),U=I.findIndex(ue=>q(ue,y));return U===-1?I.push(y):I.splice(U,1),w==null?void 0:w(I)}})),j=E(y=>{S({type:6,trigger:y})}),W=m.useMemo(()=>({onChange:A,registerOption:B,goToOption:k,setIsTyping:D,closeCombobox:h,openCombobox:me,setActivationTrigger:j,selectActiveOption:fe}),[]),[Ke,Ge]=it(),Je=i===null?{}:{ref:i},Ze=m.useCallback(()=>{if(V!==void 0)return w==null?void 0:w(V)},[w,V]);return M.createElement(Ge,{value:Ke,props:{htmlFor:(n=x.inputRef.current)==null?void 0:n.id},slot:{open:x.comboboxState===0,disabled:p}},M.createElement(lt,null,M.createElement(Ee.Provider,{value:W},M.createElement(le.Provider,{value:x},M.createElement(gt,{value:te(x.comboboxState,{0:de.Open,1:de.Closed})},f!=null&&M.createElement(rt,{disabled:p,data:O!=null?{[f]:O}:{},form:a,onReset:Ze}),se({ourProps:Je,theirProps:L,slot:$,defaultTag:on,name:"Combobox"}))))))}let rn="input";function sn(e,i){var t,n,o,r,s;let l=ne("Combobox.Input"),a=ae("Combobox.Input"),f=m.useId(),c=st(),{id:p=c||`headlessui-combobox-input-${f}`,onChange:d,displayValue:u,disabled:b=l.disabled||!1,autoFocus:C=!1,type:v="text",...T}=e,L=pe(l.inputRef,i,at()),V=je(l.inputRef),O=bt(),w=E(()=>{a.onChange(null),l.optionsRef.current&&(l.optionsRef.current.scrollTop=0),a.goToOption(F.Nothing)}),R=m.useMemo(()=>{var h;return typeof u=="function"&&l.value!==void 0?(h=u(l.value))!=null?h:"":typeof l.value=="string"?l.value:""},[l.value,u]);ke(([h,D],[k,B])=>{if(l.isTyping)return;let A=l.inputRef.current;A&&((B===0&&D===1||h!==k)&&(A.value=h),requestAnimationFrame(()=>{if(l.isTyping||!A||(V==null?void 0:V.activeElement)!==A)return;let{selectionStart:j,selectionEnd:W}=A;Math.abs((W??0)-(j??0))===0&&j===0&&A.setSelectionRange(A.value.length,A.value.length)}))},[R,l.comboboxState,V,l.isTyping]),ke(([h],[D])=>{if(h===0&&D===1){if(l.isTyping)return;let k=l.inputRef.current;if(!k)return;let B=k.value,{selectionStart:A,selectionEnd:j,selectionDirection:W}=k;k.value="",k.value=B,W!==null?k.setSelectionRange(A,j,W):k.setSelectionRange(A,j)}},[l.comboboxState]);let S=m.useRef(!1),N=E(()=>{S.current=!0}),G=E(()=>{O.nextFrame(()=>{S.current=!1})}),Z=E(h=>{switch(a.setIsTyping(!0),h.key){case z.Enter:if(l.comboboxState!==0||S.current)return;if(h.preventDefault(),h.stopPropagation(),l.activeOptionIndex===null){a.closeCombobox();return}a.selectActiveOption(),l.mode===0&&a.closeCombobox();break;case z.ArrowDown:return h.preventDefault(),h.stopPropagation(),te(l.comboboxState,{0:()=>a.goToOption(F.Next),1:()=>a.openCombobox()});case z.ArrowUp:return h.preventDefault(),h.stopPropagation(),te(l.comboboxState,{0:()=>a.goToOption(F.Previous),1:()=>{X.flushSync(()=>a.openCombobox()),l.value||a.goToOption(F.Last)}});case z.Home:if(h.shiftKey)break;return h.preventDefault(),h.stopPropagation(),a.goToOption(F.First);case z.PageUp:return h.preventDefault(),h.stopPropagation(),a.goToOption(F.First);case z.End:if(h.shiftKey)break;return h.preventDefault(),h.stopPropagation(),a.goToOption(F.Last);case z.PageDown:return h.preventDefault(),h.stopPropagation(),a.goToOption(F.Last);case z.Escape:return l.comboboxState!==0?void 0:(h.preventDefault(),l.optionsRef.current&&!l.optionsPropsRef.current.static&&h.stopPropagation(),l.mode===0&&l.value===null&&w(),a.closeCombobox());case z.Tab:if(l.comboboxState!==0)return;l.mode===0&&l.activationTrigger!==1&&a.selectActiveOption(),a.closeCombobox();break}}),H=E(h=>{d==null||d(h),l.mode===0&&h.target.value===""&&w(),a.openCombobox()}),Y=E(h=>{var D,k,B;let A=(D=h.relatedTarget)!=null?D:$e.find(j=>j!==h.currentTarget);if(!((k=l.optionsRef.current)!=null&&k.contains(A))&&!((B=l.buttonRef.current)!=null&&B.contains(A))&&l.comboboxState===0)return h.preventDefault(),l.mode===0&&l.value===null&&w(),a.closeCombobox()}),q=E(h=>{var D,k,B;let A=(D=h.relatedTarget)!=null?D:$e.find(j=>j!==h.currentTarget);(k=l.buttonRef.current)!=null&&k.contains(A)||(B=l.optionsRef.current)!=null&&B.contains(A)||l.disabled||l.immediate&&l.comboboxState!==0&&O.microTask(()=>{X.flushSync(()=>a.openCombobox()),a.setActivationTrigger(1)})}),_=ye(),P=Ot(),{isFocused:Q,focusProps:x}=qe({autoFocus:C}),{isHovered:ee,hoverProps:$}=Pe({isDisabled:b}),fe=m.useMemo(()=>({open:l.comboboxState===0,disabled:b,hover:ee,focus:Q,autofocus:C}),[l,ee,Q,C,b]),me=Se({ref:L,id:p,role:"combobox",type:v,"aria-controls":(t=l.optionsRef.current)==null?void 0:t.id,"aria-expanded":l.comboboxState===0,"aria-activedescendant":l.activeOptionIndex===null?void 0:l.virtual?(n=l.options.find(h=>!h.dataRef.current.disabled&&l.compare(h.dataRef.current.value,l.virtual.options[l.activeOptionIndex])))==null?void 0:n.id:(o=l.options[l.activeOptionIndex])==null?void 0:o.id,"aria-labelledby":_,"aria-describedby":P,"aria-autocomplete":"list",defaultValue:(s=(r=e.defaultValue)!=null?r:l.defaultValue!==void 0?u==null?void 0:u(l.defaultValue):null)!=null?s:l.defaultValue,disabled:b||void 0,autoFocus:C,onCompositionStart:N,onCompositionEnd:G,onKeyDown:Z,onChange:H,onFocus:q,onBlur:Y},x,$);return se({ourProps:me,theirProps:T,slot:fe,defaultTag:rn,name:"Combobox.Input"})}let an="button";function un(e,i){var t;let n=ne("Combobox.Button"),o=ae("Combobox.Button"),r=pe(n.buttonRef,i),s=m.useId(),{id:l=`headlessui-combobox-button-${s}`,disabled:a=n.disabled||!1,autoFocus:f=!1,...c}=e,p=Be(n.inputRef),d=E(S=>{switch(S.key){case z.Space:case z.Enter:S.preventDefault(),S.stopPropagation(),n.comboboxState===1&&X.flushSync(()=>o.openCombobox()),p();return;case z.ArrowDown:S.preventDefault(),S.stopPropagation(),n.comboboxState===1&&(X.flushSync(()=>o.openCombobox()),n.value||o.goToOption(F.First)),p();return;case z.ArrowUp:S.preventDefault(),S.stopPropagation(),n.comboboxState===1&&(X.flushSync(()=>o.openCombobox()),n.value||o.goToOption(F.Last)),p();return;case z.Escape:if(n.comboboxState!==0)return;S.preventDefault(),n.optionsRef.current&&!n.optionsPropsRef.current.static&&S.stopPropagation(),X.flushSync(()=>o.closeCombobox()),p();return;default:return}}),u=E(S=>{S.preventDefault(),!Qe(S.currentTarget)&&(S.button===Ce.Left&&(n.comboboxState===0?o.closeCombobox():o.openCombobox()),p())}),b=ye([l]),{isFocusVisible:C,focusProps:v}=qe({autoFocus:f}),{isHovered:T,hoverProps:L}=Pe({isDisabled:a}),{pressed:V,pressProps:O}=Xe({disabled:a}),w=m.useMemo(()=>({open:n.comboboxState===0,active:V||n.comboboxState===0,disabled:a,value:n.value,hover:T,focus:C}),[n,T,C,V,a]),R=Se({ref:r,id:l,type:et(e,n.buttonRef),tabIndex:-1,"aria-haspopup":"listbox","aria-controls":(t=n.optionsRef.current)==null?void 0:t.id,"aria-expanded":n.comboboxState===0,"aria-labelledby":b,disabled:a||void 0,autoFocus:f,onMouseDown:u,onKeyDown:d},v,L,O);return se({ourProps:R,theirProps:c,slot:w,defaultTag:an,name:"Combobox.Button"})}let dn="div",cn=Ve.RenderStrategy|Ve.Static;function pn(e,i){var t,n,o;let r=m.useId(),{id:s=`headlessui-combobox-options-${r}`,hold:l=!1,anchor:a,portal:f=!1,modal:c=!0,transition:p=!1,...d}=e,u=ne("Combobox.Options"),b=ae("Combobox.Options"),C=ut(a);C&&(f=!0);let[v,T]=dt(C),L=ct(),V=pe(u.optionsRef,i,C?v:null),O=je(u.optionsRef),w=xt(),[R,S]=yt(p,u.optionsRef,w!==null?(w&de.Open)===de.Open:u.comboboxState===0);At(R,u.inputRef,b.closeCombobox);let N=u.__demoMode?!1:c&&u.comboboxState===0;It(N,O);let G=u.__demoMode?!1:c&&u.comboboxState===0;Tt(G,{allowed:E(()=>[u.inputRef.current,u.buttonRef.current,u.optionsRef.current])}),J(()=>{var $;u.optionsPropsRef.current.static=($=e.static)!=null?$:!1},[u.optionsPropsRef,e.static]),J(()=>{u.optionsPropsRef.current.hold=l},[u.optionsPropsRef,l]),Gt(u.comboboxState===0,{container:u.optionsRef.current,accept($){return $.getAttribute("role")==="option"?NodeFilter.FILTER_REJECT:$.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk($){$.setAttribute("role","none")}});let Z=ye([(t=u.buttonRef.current)==null?void 0:t.id]),H=m.useMemo(()=>({open:u.comboboxState===0,option:void 0}),[u.comboboxState]),Y=E(()=>{b.setActivationTrigger(0)}),q=E($=>{$.preventDefault(),b.setActivationTrigger(0)}),_=Se(C?L():{},{"aria-labelledby":Z,role:"listbox","aria-multiselectable":u.mode===1?!0:void 0,id:s,ref:V,style:{...d.style,...T,"--input-width":Me(u.inputRef,!0).width,"--button-width":Me(u.buttonRef,!0).width},onWheel:u.activationTrigger===0?void 0:Y,onMouseDown:q,...St(S)}),P=R&&u.comboboxState===1,Q=_e(P,(n=u.virtual)==null?void 0:n.options),x=_e(P,u.value),ee=E($=>u.compare(x,$));if(u.virtual){if(Q===void 0)throw new Error("Missing `options` in virtual mode");Object.assign(d,{children:M.createElement(le.Provider,{value:Q!==u.virtual.options?{...u,virtual:{...u.virtual,options:Q}}:u},M.createElement(tn,{slot:H},d.children))})}return M.createElement(wt,{enabled:f?e.static||R:!1},M.createElement(le.Provider,{value:u.mode===1?u:{...u,isSelected:ee}},se({ourProps:_,theirProps:{...d,children:M.createElement(pt,{freeze:P},typeof d.children=="function"?(o=d.children)==null?void 0:o.call(d,H):d.children)},slot:H,defaultTag:dn,features:cn,visible:R,name:"Combobox.Options"})))}let fn="div";function mn(e,i){var t,n,o,r;let s=ne("Combobox.Option"),l=ae("Combobox.Option"),a=m.useId(),{id:f=`headlessui-combobox-option-${a}`,value:c,disabled:p=(o=(n=(t=s.virtual)==null?void 0:t.disabled)==null?void 0:n.call(t,c))!=null?o:!1,order:d=null,...u}=e,b=Be(s.inputRef),C=s.virtual?s.activeOptionIndex===s.calculateIndex(c):s.activeOptionIndex===null?!1:((r=s.options[s.activeOptionIndex])==null?void 0:r.id)===f,v=s.isSelected(c),T=m.useRef(null),L=Ct({disabled:p,value:c,domRef:T,order:d}),V=m.useContext(He),O=pe(i,T,V?V.measureElement:null),w=E(()=>{l.setIsTyping(!1),l.onChange(c)});J(()=>l.registerOption(f,L),[L,f]);let R=m.useRef(!(s.virtual||s.__demoMode));J(()=>{if(!s.virtual&&!s.__demoMode)return Fe().requestAnimationFrame(()=>{R.current=!0})},[s.virtual,s.__demoMode]),J(()=>{if(R.current&&s.comboboxState===0&&C&&s.activationTrigger!==0)return Fe().requestAnimationFrame(()=>{var _,P;(P=(_=T.current)==null?void 0:_.scrollIntoView)==null||P.call(_,{block:"nearest"})})},[T,C,s.comboboxState,s.activationTrigger,s.activeOptionIndex]);let S=E(_=>{_.preventDefault(),_.button===Ce.Left&&(p||(w(),Mt()||requestAnimationFrame(()=>b()),s.mode===0&&l.closeCombobox()))}),N=E(()=>{if(p)return l.goToOption(F.Nothing);let _=s.calculateIndex(c);l.goToOption(F.Specific,_)}),G=ft(),Z=E(_=>G.update(_)),H=E(_=>{if(!G.wasMoved(_)||p||C)return;let P=s.calculateIndex(c);l.goToOption(F.Specific,P,0)}),Y=E(_=>{G.wasMoved(_)&&(p||C&&(s.optionsPropsRef.current.hold||l.goToOption(F.Nothing)))}),q=m.useMemo(()=>({active:C,focus:C,selected:v,disabled:p}),[C,v,p]);return se({ourProps:{id:f,ref:O,role:"option",tabIndex:p===!0?void 0:-1,"aria-disabled":p===!0?!0:void 0,"aria-selected":v,disabled:void 0,onMouseDown:S,onFocus:N,onPointerEnter:Z,onMouseEnter:Z,onPointerMove:H,onMouseMove:H,onPointerLeave:Y,onMouseLeave:Y},theirProps:u,slot:q,defaultTag:fn,name:"Combobox.Option"})}let hn=re(ln),Re=re(un),Oe=re(sn),vn=mt,Ie=re(pn),Te=re(mn),We=Object.assign(hn,{Input:Oe,Button:Re,Label:vn,Options:Ie,Option:Te});function $n(e){return ce({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm13.36-1.814a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z",clipRule:"evenodd"},child:[]}]})(e)}function Ue(e){return ce({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M11.47 4.72a.75.75 0 0 1 1.06 0l3.75 3.75a.75.75 0 0 1-1.06 1.06L12 6.31 8.78 9.53a.75.75 0 0 1-1.06-1.06l3.75-3.75Zm-3.75 9.75a.75.75 0 0 1 1.06 0L12 17.69l3.22-3.22a.75.75 0 1 1 1.06 1.06l-3.75 3.75a.75.75 0 0 1-1.06 0l-3.75-3.75a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"},child:[]}]})(e)}function Ln(e){return ce({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"},child:[]}]})(e)}function gn(e){return ce({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"m289.94 256 95-95A24 24 0 0 0 351 127l-95 95-95-95a24 24 0 0 0-34 34l95 95-95 95a24 24 0 1 0 34 34l95-95 95 95a24 24 0 0 0 34-34z"},child:[]}]})(e)}const K=(e,i)=>i==="value"||i==="id"||i==="label"?(e==null?void 0:e[i])+"":typeof i=="function"?i(e)+"":e.value+"",bn=(e,i)=>i.type==="SEARCH"?{...e,query:i.query,filterList:e.list.filter(t=>t.label.toLowerCase().includes(i.query.toLowerCase()))}:i.type==="SETVALUE"?{...e,value:i.value,selected:e.list.find(t=>K(t,e.valueField)===i.value)||null}:i.type==="SETSELECT"?{...e,selected:i.selected,value:K(i.selected,e.valueField)+""}:e,ge=({id:e,name:i,options:t,value:n="",valueField:o="value",onChange:r,onSearch:s,placeholder:l,closeButton:a=!0},f)=>{const[c,p]=M.useReducer(bn,{list:t,query:"",filterList:t,value:n,valueField:o,selected:t.find(d=>{const u=K(d,o);return n?u===n:!1})||null});return M.useImperativeHandle(f,()=>({search:d=>p({type:"SEARCH",query:d}),setValue:d=>p({type:"SETVALUE",value:d})})),g.jsx(We,{value:c.selected,onChange:d=>{p({type:"SETSELECT",selected:d}),r&&r(d?K(d,o):"")},children:g.jsxs("div",{className:"relative",children:[g.jsx(Oe,{placeholder:l,onChange:d=>{p({type:"SEARCH",query:d.target.value}),s&&s(d.target.value)},autoComplete:"off",displayValue:d=>(d==null?void 0:d.label)||""}),g.jsxs("div",{className:"absolute inset-y-0 right-0 flex items-center pr-2",children:[g.jsx("button",{type:"button",className:ie("size-5 text-gray-400 hover:text-gray-500 rounded-full hover:bg-gray-200 items-center flex justify-center",c.value?"":"hidden",a?"":"!hidden"),onClick:()=>{p({type:"SETVALUE",value:""}),p({type:"SEARCH",query:""}),r&&r("")},children:g.jsx(gn,{})}),g.jsx(Re,{className:"items-center",children:g.jsx(Ue,{className:"text-gray-400 size-5","aria-hidden":"true"})})]}),g.jsx("input",{className:"!hidden",type:"text",id:e,name:i,readOnly:!0,value:c.value+""}),g.jsx(Ne,{as:m.Fragment,enter:"transition duration-100 ease-out",enterFrom:"scale-95 transform opacity-0",enterTo:"scale-100 transform opacity-100",leave:"transition duration-75 ease-in",leaveFrom:"scale-100 transform opacity-100",leaveTo:"scale-95 transform opacity-0",afterLeave:()=>p({type:"SEARCH",query:""}),children:g.jsx(Ie,{className:"absolute z-50 w-full py-1 mt-5 overflow-auto text-base bg-white shadow-lg max-h-60 rounded-md ring-1 ring-black/5 focus:outline-none dark:bg-gray-900 sm:text-sm",children:c.filterList.map(d=>g.jsx(Te,{as:m.Fragment,value:d,children:({selected:u,focus:b})=>g.jsxs("li",{className:ie("relative flex cursor-pointer justify-between px-5 py-4 text-black hover:bg-primary-100 dark:text-white",(u||b)&&"bg-primary-100 dark:bg-gray-700",d.enable===!1&&"cursor-not-allowed opacity-50"),children:[g.jsx("span",{className:"pl-5",children:d.label}),u?g.jsx("span",{className:ie("absolute inset-y-0 left-0 flex items-center pl-3 text-primary-600"),children:g.jsx(ze,{className:"w-5 h-5","aria-hidden":"true"})}):null]})},d.id))})})]})})},xn=M.forwardRef(ge);try{ge.displayName="AutoCompleteBase",ge.__docgenInfo={description:"",displayName:"AutoCompleteBase",props:{id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string"}},options:{defaultValue:null,description:"",name:"options",required:!0,type:{name:"ListOption[]"}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},value:{defaultValue:{value:""},description:"",name:"value",required:!1,type:{name:"string | number"}},readOnly:{defaultValue:null,description:"",name:"readOnly",required:!1,type:{name:"boolean"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},placeholder:{defaultValue:null,description:"",name:"placeholder",required:!1,type:{name:"string"}},closeButton:{defaultValue:{value:"true"},description:"",name:"closeButton",required:!1,type:{name:"boolean"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((value: string) => void)"}},onSearch:{defaultValue:null,description:"",name:"onSearch",required:!1,type:{name:"((query: string) => void)"}},valueField:{defaultValue:{value:"value"},description:"",name:"valueField",required:!1,type:{name:"ValueField<ListOption>"}},ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"Ref<AutoCompleteBaseHandler>"}}}}}catch{}const yn=(e,i)=>{if(i.type==="SEARCH")return{...e,query:i.query,filterList:e.list.filter(t=>t.label.toLowerCase().includes(i.query.toLowerCase()))};if(i.type==="SETVALUE")return{...e,value:i.value,selected:e.list.filter(t=>{const n=K(t,e.valueField);return i.value.includes(n)})||[],query:""};if(i.type==="SETSELECT")return{...e,selected:i.selected,value:i.selected.map(t=>K(t,e.valueField)),query:""};if(i.type==="REMOVESELECT"){const t=K(i.selected,e.valueField),n=e.value.filter(o=>o!==t);return{...e,value:n,selected:e.selected?e.selected.filter(o=>K(o,e.valueField)!==t):[]}}return e},be=({id:e,name:i,value:t=[],options:n,valueField:o="value",onChange:r,onSearch:s,placeholder:l},a)=>{var p;const[f,c]=M.useReducer(yn,{query:"",list:n,filterList:n,value:t||[],valueField:o,selected:n.filter(d=>{const u=K(d,o);return ht.some(t,b=>b+""==u+"")})||[]});return M.useImperativeHandle(a,()=>({search:d=>{c({type:"SEARCH",query:d})},setValue:d=>{c({type:"SETVALUE",value:d})}})),g.jsx(We,{value:f.selected,onChange:d=>{c({type:"SETSELECT",selected:d});const u=(d==null?void 0:d.map(b=>K(b,o)))||[];r&&r(u)},multiple:!0,children:g.jsxs("div",{className:"relative flex gap-1",children:[f.selected.length>0&&g.jsx("ul",{className:"flex form-control gap-1",children:(p=f.selected)==null?void 0:p.map((d,u)=>g.jsx("li",{children:g.jsxs("div",{className:"flex p-1 rounded bg-blue-50 dark:bg-blue-900",children:[g.jsx("span",{className:"text-xs whitespace-nowrap",children:d.label}),g.jsx("button",{type:"button",onClick:()=>c({type:"REMOVESELECT",selected:d}),children:g.jsx(Ft,{fontSize:12,className:"font-bold"})})]})},u))}),g.jsx(Oe,{placeholder:l,value:f.query,onChange:d=>{c({type:"SEARCH",query:d.target.value}),s&&s(d.target.value)},onKeyDown:d=>{d.key==="Backspace"&&f.query===""&&f.selected.length>0&&c({type:"REMOVESELECT",selected:f.selected[f.selected.length-1]})},autoComplete:"off"}),g.jsx(Re,{className:"absolute inset-y-0 right-0 flex items-center pr-2",children:g.jsx(Ue,{className:"w-5 h-5 text-gray-400","aria-hidden":"true"})}),g.jsx("input",{className:"!hidden",type:"text",id:e,name:i,readOnly:!0,value:f.value+""}),g.jsx(Ne,{as:m.Fragment,enter:"transition duration-100 ease-out",enterFrom:"scale-95 transform opacity-0",enterTo:"scale-100 transform opacity-100",leave:"transition duration-75 ease-in",leaveFrom:"scale-100 transform opacity-100",leaveTo:"scale-95 transform opacity-0",afterLeave:()=>c({type:"SEARCH",query:""}),children:g.jsx(Ie,{className:"absolute w-full py-1 mt-10 overflow-auto text-base bg-white shadow-lg max-h-60 rounded-md ring-1 ring-black/5 focus:outline-none dark:bg-gray-900 sm:text-sm",children:f.filterList.map(d=>g.jsx(Te,{as:m.Fragment,value:d,children:({selected:u,focus:b})=>g.jsxs("li",{className:ie("relative flex cursor-pointer justify-between px-5 py-4 text-black hover:bg-primary-100 dark:text-white",(u||b)&&"bg-primary-100 dark:bg-gray-700",d.enable===!1&&"cursor-not-allowed opacity-50"),children:[g.jsx("span",{className:"pl-5",children:d.label}),u?g.jsx("span",{className:ie("absolute inset-y-0 left-0 flex items-center pl-3 text-primary-600"),children:g.jsx(ze,{className:"w-5 h-5","aria-hidden":"true"})}):null]})},d.id))})})]})})},Sn=M.forwardRef(be);try{be.displayName="AutoCompleteMultiple",be.__docgenInfo={description:"",displayName:"AutoCompleteMultiple",props:{id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string"}},options:{defaultValue:null,description:"",name:"options",required:!0,type:{name:"ListOption[]"}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},value:{defaultValue:{value:"[]"},description:"",name:"value",required:!1,type:{name:"string[] | number[]"}},readOnly:{defaultValue:null,description:"",name:"readOnly",required:!1,type:{name:"boolean"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},placeholder:{defaultValue:null,description:"",name:"placeholder",required:!1,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((value: string[]) => void)"}},onSearch:{defaultValue:null,description:"",name:"onSearch",required:!1,type:{name:"((query: string) => void)"}},valueField:{defaultValue:{value:"value"},description:"",name:"valueField",required:!1,type:{name:"ValueField<ListOption>"}},ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"Ref<AutoCompleteMultipleHandler>"}}}}}catch{}const xe=({multiple:e,labelProps:i,...t},n)=>{const o=()=>g.jsx(g.Fragment,{children:e===!0?g.jsx(Sn,{ref:n,...t}):g.jsx(xn,{ref:n,...t})});return i?g.jsx(Ye,{...i,children:o()}):o()},zn=M.forwardRef(xe);try{xe.displayName="AutoComplete",xe.__docgenInfo={description:"",displayName:"AutoComplete",props:{id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string"}},options:{defaultValue:null,description:"",name:"options",required:!0,type:{name:"ListOption[]"}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"string | number | string[] | number[]"}},readOnly:{defaultValue:null,description:"",name:"readOnly",required:!1,type:{name:"boolean"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},placeholder:{defaultValue:null,description:"",name:"placeholder",required:!1,type:{name:"string"}},closeButton:{defaultValue:null,description:"",name:"closeButton",required:!1,type:{name:"boolean"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((value: string) => void) | ((value: string[]) => void)"}},onSearch:{defaultValue:null,description:"",name:"onSearch",required:!1,type:{name:"((query: string) => void) | ((query: string) => void)"}},valueField:{defaultValue:null,description:"",name:"valueField",required:!1,type:{name:"ValueField<ListOption>"}},multiple:{defaultValue:null,description:"",name:"multiple",required:!1,type:{name:"boolean"}},labelProps:{defaultValue:null,description:"",name:"labelProps",required:!1,type:{name:"LabelBaseProps"}},ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"Ref<AutoCompleteHandler>"}}}}}catch{}export{zn as A,Ue as H,$n as a,Ln as b,K as g};
